//
//  BaseScrollViewController.m
//  Sandglass
//
//  Created by Sea on 13-9-22.
//
//

#import "BaseScrollViewController.h"

#import "UIImage+CustomExtensions.h"

@interface BaseScrollViewController () {
    
    UIImageView             *_closeReminderImageView;
    
    NSString                *m_unionId;
}

@end

@implementation BaseScrollViewController

@synthesize unionId = m_unionId;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void) dealloc {
    
    [_closeReminderImageView release];
    _closeReminderImageView = nil;
    
    [super dealloc];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
	// Do any additional setup after loading the view.
    
    /*UIImage *image = [UIImage imageNamed:@"close_reminder.png" imageBundle:@"Main"];
    
    _closeReminderImageView = [[UIImageView alloc] initWithImage:image];
    _closeReminderImageView.alpha = 0.0;
    
    _closeReminderImageView.frame = CGRectMake(0, 0, image.size.width, image.size.height);*/
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
    
    [_closeReminderImageView release];
    _closeReminderImageView = nil;
}

#pragma mark -
#pragma mark BaseScrollViewDelegate Methods

//TODO: scrollView是否到达关闭区域
- (void)scrollViewReachCloseZone:(BOOL)isReach {
    
    /*if (isReach) {
        
        if (!_closeReminderImageView.superview) {
            
             _closeReminderImageView.center = self.navScrollController.view.center;
            
            [self.navScrollController.view addSubview:_closeReminderImageView];
            
            [UIView animateWithDuration:0.3 animations:^{
                
                _closeReminderImageView.alpha = 1.0;
            }];
        }
    }
    else {
        
        if (_closeReminderImageView.superview) {
         
            [UIView animateWithDuration:0.3 animations:^{
                
                _closeReminderImageView.alpha = 0.0;
                
            } completion:^(BOOL finished) {
                
                if (finished) {
                    
                    [_closeReminderImageView removeFromSuperview];
                }
            }];
        }
    }*/
}

//TODO: scrollView滑动到可关闭区域内,可将其关闭
- (void)scrollViewDidMoveToClose:(BaseScrollView *)scrollView {
    
    [self.navScrollController popViewControllerAnimated:YES];
    
    /*if (_closeReminderImageView.superview) {
        
        [UIView animateWithDuration:0.3 animations:^{
            
            _closeReminderImageView.alpha = 0.0;
            
        } completion:^(BOOL finished) {
            
            if (finished) {
                
                [_closeReminderImageView removeFromSuperview];
            }
        }];
    }*/
    
}


@end
